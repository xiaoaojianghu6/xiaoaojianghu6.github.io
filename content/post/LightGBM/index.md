---
authors:
- william
date: '2025-04-18'
summary: '| **æ”¹è¿›** | **LightGBM çš„åšæ³•** | **æœ‰ä»€ä¹ˆç”¨** |'
tags: [LM]
title: LightGBM
---

# LightGBM

## **ðŸ”§ LightGBM ç›¸æ¯” XGBoost æœ‰å“ªäº›æ ¸å¿ƒæ”¹è¿›ï¼Ÿ**

| **æ”¹è¿›** | **LightGBM çš„åšæ³•** | **æœ‰ä»€ä¹ˆç”¨** |
| --- | --- | --- |
| 1ï¸âƒ£ æ ·æœ¬ä½¿ç”¨æ–¹å¼ | **åŸºäºŽç›´æ–¹çš„å†³ç­–æ ‘å­¦ä¹ ç®—æ³•ï¼ˆHistogramï¼‰** | æŠŠè¿žç»­ç‰¹å¾ç¦»æ•£æˆå‡ ä¸ªæ¡¶ï¼ŒåŠ å¿«è®¡ç®—ï¼Œé™ä½Žå†…å­˜å ç”¨ |
| 2ï¸âƒ£ æ ·æœ¬å¢žé•¿æ–¹å¼ | **Leaf-wiseï¼ˆå¶å­ä¼˜å…ˆï¼‰** | æ¯æ¬¡ä»Žæ‰€æœ‰å¶å­ä¸­é€‰å‡ºå¢žç›Šæœ€å¤§çš„å¶å­è¿›è¡Œåˆ†è£‚ï¼ˆè€Œä¸æ˜¯æŒ‰å±‚æ‰©å±•ï¼‰â†’ æ›´å¿«ã€æ›´å‡† |
| 3ï¸âƒ£ ç‰¹å¾æŒ‰éœ€ | **GOSSï¼ˆGradient-based One-Side Samplingï¼‰** | å¯¹æ¢¯åº¦å°çš„æ ·æœ¬è¿›è¡Œé‡‡æ ·ï¼Œåªä¿ç•™æ¢¯åº¦å¤§çš„é‡è¦æ ·æœ¬ |
| 4ï¸âƒ£ ç‰¹å¾é€‰æ‹© | **EFBï¼ˆExclusive Feature Bundlingï¼‰** | æŠŠäº’æ–¥çš„ç¨€ç–ç‰¹å¾åˆå¹¶ï¼Œå‡å°‘ç»´åº¦ |
| 5ï¸âƒ£ æ”¯æŒç¨€ç–æ•°æ® | å†…ç½®ç¨€ç–æ„ŸçŸ¥æœºåˆ¶ï¼ˆzero-awareï¼‰ | è‡ªåŠ¨å¤„ç†ç¼ºå¤±å€¼ã€ç¨€ç–çŸ©é˜µï¼Œæ— éœ€é¢å¤–é¢„å¤„ç† |

## **ðŸ“¦ LightGBM å’Œ XGBoost å¯¹æ¯”**

| **ç‰¹æ€§** | **XGBoost** | **LightGBM** |
| --- | --- | --- |
| æ ‘ç”Ÿé•¿ç­–ç•¥ | Level-wiseï¼ˆæŒ‰å±‚ï¼‰ | Leaf-wiseï¼ˆæŒ‰å¢žç›Šï¼‰ |
| ç‰¹å¾ç¦»æ•£åŒ– | ä¸åšç¦»æ•£åŒ– | ä½¿ç”¨ histogram ç¦»æ•£åŒ– |
| ç‰¹å¾é€‰æ‹© | å…¨éƒ¨å‚ä¸Ž | æ”¯æŒ GOSS + EFBï¼ˆæ›´å¿«ï¼‰ |
| ç¨€ç–å¤„ç† | åŸºæœ¬æ”¯æŒ | åŽŸç”Ÿæ”¯æŒï¼ˆæ›´ä¼˜ï¼‰ |
| ç²¾åº¦ | ç¨å¼±ï¼ˆåœ¨åŒå‚æ•°ä¸‹ï¼‰ | é€šå¸¸æ›´é«˜ï¼ˆä½†ä¹Ÿæ›´æ˜“è¿‡æ‹Ÿåˆï¼‰ |
| è®­ç»ƒé€Ÿåº¦ | è¾ƒå¿« | éžå¸¸å¿« |
| å¤§æ•°æ®æ”¯æŒ | å¥½ | **æ›´å¼ºï¼** |
| ç¨³å®šæ€§ | ç¨³å®šæ³›åŒ– | æ›´å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œéœ€è¦è°ƒå‚æŽ§åˆ¶ |

## **ðŸ§  å®žè·µå»ºè®®ï¼ˆä»€ä¹ˆæ—¶å€™ç”¨ LightGBM æ›´é¦™ï¼Ÿï¼‰**

| **é€‚ç”¨åœºæ™¯** | **åŽŸå› ** |
| --- | --- |
| ç‰¹å¾å¾ˆå¤šã€ç»´åº¦ç¨€ç– | EFB + ç¨€ç–æ”¯æŒ |
| æ ·æœ¬é‡å·¨å¤§ | GOSS é‡‡æ ·ç­–ç•¥èŠ‚çœèµ„æº |
| éœ€è¦å¿«é€Ÿè¿­ä»£ | è®­ç»ƒå¿«ã€å å†…å­˜å° |
| æŽ’åºç±»é—®é¢˜ï¼ˆæ¯”å¦‚æŽ¨èï¼‰ | åŽŸç”Ÿæ”¯æŒ Ranking æ¨¡å¼ |
| Kaggle æ¯”èµ› | é«˜åˆ†ç¥žå™¨ðŸ”¥ï¼ˆå‡ ä¹Žéƒ½æ˜¯ XGB / LGB / CatBoostï¼‰ |

---

## **ðŸ§¬ LightGBM çš„æ ¸å¿ƒè®­ç»ƒæœºåˆ¶è¯¦è§£**

### **ðŸ”¹ 1. Leaf-wise æ ‘ç”Ÿé•¿ï¼ˆåŒºåˆ«äºŽ XGBoost çš„ Level-wiseï¼‰**

- XGBoost æ˜¯â€œæŒ‰å±‚æ‰©å±•â€æ ‘ï¼Œæ¯ä¸€å±‚éƒ½å¢žåŠ ä¸€å®šæ•°é‡çš„å¶å­èŠ‚ç‚¹ã€‚
- LightGBM æ˜¯â€œä»Žå½“å‰æœ€æœ‰å¸Œæœ›çš„å¶å­æ‰©å±•â€ï¼Œ**å¢žç›Šæœ€å¤§çš„å¶å­ä¼˜å…ˆåˆ†è£‚**ã€‚

> âœ… ä¼˜ç‚¹ï¼šæ›´å¿«æ”¶æ•›ï¼Œå‡†ç¡®çŽ‡æ›´é«˜
> 

> âš ï¸ ç¼ºç‚¹ï¼šå®¹æ˜“è¿‡æ‹Ÿåˆï¼ˆå°¤å…¶åœ¨å°æ•°æ®ä¸Šï¼‰
> 

### **ðŸ”¹ 2. Histogram ç®—æ³•**

- æŠŠè¿žç»­ç‰¹å¾**ç¦»æ•£æˆ k ä¸ªæ¡¶**ï¼ˆé»˜è®¤256ä¸ªï¼‰
- è®­ç»ƒè¿‡ç¨‹ä¸­ä¸å†è®¡ç®—æ¯ä¸ªå€¼çš„å¢žç›Šï¼Œè€Œæ˜¯ç›´æŽ¥åœ¨æ¡¶ä¸Šåšç´¯ç§¯ç»Ÿè®¡

> âœ… å¤§å¹…å‡å°‘å†…å­˜ & åŠ å¿«è®­ç»ƒ
> 

> ç±»ä¼¼ï¼šä»Žç²¾ç»†ç”»ç”»å˜æˆâ€œåƒç´ é£Žæ ¼æ¶‚è‰²â€
> 

---

## **âœ… LightGBM çš„æ ¸å¿ƒæµç¨‹ï¼ˆä»¥åˆ†ç±»ä¸ºä¾‹ï¼‰**

---

### **ðŸ§­ æ€»è§ˆæµç¨‹ï¼š**

```
æ•°æ®è¾“å…¥ â†’ ç¦»æ•£åŒ–ï¼ˆHistogramï¼‰ â†’ æž„å»ºç¬¬ä¸€æ£µæ ‘ â†’ è®¡ç®—æ®‹å·®ï¼ˆè´Ÿæ¢¯åº¦ï¼‰
â†’ é€‰å‡ºæœ€ä¼˜åˆ†è£‚ç‰¹å¾ä¸Žä½ç½® â†’ æž„å»ºä¸‹ä¸€æ£µæ ‘ï¼ˆç»§ç»­æ‹Ÿåˆæ®‹å·®ï¼‰
â†’ å¤šè½®è¿­ä»£ â†’ æœ€ç»ˆæ¨¡åž‹ = æ‰€æœ‰æ ‘çš„åŠ æƒå’Œ
```

---

### **æ•°æ®å‡†å¤‡ + ç¦»æ•£åŒ–ï¼ˆHistogram æž„å»ºï¼‰**

- é¦–å…ˆï¼Œå¯¹æ‰€æœ‰çš„è¿žç»­æ•°å€¼åž‹ç‰¹å¾è¿›è¡Œåˆ†æ¡¶ï¼ˆbinning)å¤„ç†ï¼ˆé»˜è®¤256ä¸ªæ¡¶ï¼‰ã€‚
- ä¾‹å¦‚ï¼ŒæŠŠâ€œå¹´é¾„â€è¿™ä¸ªç‰¹å¾ï¼ˆå–å€¼èŒƒå›´ 0~100ï¼‰åˆ’åˆ†ä¸º 256 ä¸ªæ¡¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦è®°å½•ï¼šæ ·æœ¬å±žäºŽå“ªä¸ªæ¡¶ã€æ¯ä¸ªæ¡¶çš„æ¢¯åº¦å’Œ Hessian ä¹‹å’Œã€‚
- è¿™ä¸€æ­¥æ˜¯ LightGBM çš„â€œæé€Ÿæ ¸å¿ƒâ€ï¼ŒæŠŠæµ®ç‚¹æ•°æ“ä½œæ¢æˆæ•´æ•°ç´¢å¼•ï¼Œå¤§å¹…æé«˜æ•ˆçŽ‡ã€‚

---

### **è¿­ä»£è®­ç»ƒï¼ˆBoostingï¼‰ä¸»æµç¨‹**

LightGBM æ˜¯ Boosting æ¡†æž¶ï¼Œæ¯è½®è®­ç»ƒä¸€æ£µæ–°æ ‘ï¼Œè¿™æ£µæ ‘æ˜¯ä¸ºäº†â€œä¿®æ­£å‰ä¸€è½®çš„é”™è¯¯â€

![](output1.png)

![](output2.png)

![](output3.png)

---

## **ðŸ“Œ æ€»ç»“ä¸€é¡µå›¾ï¼ˆçŸ¥è¯†åœ°å›¾ï¼‰**

```
ðŸŽ¯ æœ¬è´¨ï¼šGradient Boosting æ¡†æž¶
ðŸ§  æŸå¤±ï¼šé€æ­¥æ‹Ÿåˆè´Ÿæ¢¯åº¦ï¼ˆæ®‹å·®ï¼‰
ðŸŒ² æ ‘æž„å»ºï¼š
   - Leaf-wiseï¼ˆæŒ‰å¢žç›Šä¼˜å…ˆåˆ†è£‚ï¼‰
   - ä½¿ç”¨ Histogram ç¦»æ•£ç‰¹å¾
   - å‰ªæž & æ­£åˆ™åŒ–æŠ‘åˆ¶è¿‡æ‹Ÿåˆ
âš™ï¸ ä¼˜åŒ–ï¼š
   - GOSSï¼ˆä¿ç•™é«˜æ¢¯åº¦æ ·æœ¬ï¼‰
   - EFBï¼ˆåˆå¹¶ç¨€ç–äº’æ–¥ç‰¹å¾ï¼‰
ðŸ“ˆ æ¨¡åž‹è¾“å‡º = å¤šæ£µæ ‘è¾“å‡ºçš„åŠ æƒå’Œ
```

---

## **ðŸŽ¯ é—®é¢˜ 1ï¼šåˆ†æ¡¶ï¼ˆHistogram Binningï¼‰åˆ°åº•å¹²äº†å•¥ï¼Ÿä¸ºä»€ä¹ˆèƒ½åŠ é€Ÿï¼Ÿ**

---

### **âœ… èƒŒæ™¯ï¼šæˆ‘ä»¬è®­ç»ƒæ ‘æ¨¡åž‹æ—¶ï¼Œéœ€è¦å¯¹æ¯ä¸ªç‰¹å¾æ‰¾ã€Œæœ€ä½³åˆ‡åˆ†ç‚¹ã€ï¼Œè¿™å¾ˆæ…¢ï¼**

æ¯”å¦‚ä¸€ä¸ªæ•°å€¼ç‰¹å¾â€œå¹´é¾„â€ï¼Œæ ·æœ¬æ˜¯ï¼š

```
[25, 32, 44, 21, 37, 60, 28, 49, 36]
```

å¦‚æžœä½ è¦å»ºæ ‘ï¼Œä½ å¾—æžšä¸¾æ¯ä¸€ä¸ªå¯èƒ½çš„åˆ†è£‚ç‚¹ï¼š

```
æ¯”å¦‚åœ¨ 25/28ã€28/32ã€32/36 ä¹‹é—´éƒ½è¯•ä¸€éï¼Œçœ‹è°åˆ†è£‚åŽä¿¡æ¯å¢žç›Šæœ€å¤§
```

> ðŸš« è¿™ç§æ–¹å¼éžå¸¸æ…¢ï¼Œå°¤å…¶æ˜¯ç‰¹å¾å¤šã€æ ·æœ¬å¤šæ—¶ï¼Œè¦æ‰«ææ‰€æœ‰æ ·æœ¬ã€‚
> 

---

### **âœ… åˆ†æ¡¶åšäº†ä»€ä¹ˆï¼Ÿ**

ðŸ‘‰ LightGBM ä¼šåœ¨è®­ç»ƒå‰ï¼ŒæŠŠâ€œè¿žç»­å€¼â€ç‰¹å¾**ç¦»æ•£æˆå›ºå®šçš„æ¡¶ï¼ˆbinï¼‰**ã€‚

æ¯”å¦‚æˆ‘ä»¬è®¾å®š 4 ä¸ªæ¡¶ï¼ˆå®žé™…ä¸­å¸¸ç”¨ 255~512 ä¸ªï¼‰ï¼š

| **æ ·æœ¬å€¼** | **æ‰€å±žæ¡¶** |
| --- | --- |
| 21 | bin0 |
| 25 | bin0 |
| 28 | bin1 |
| 32 | bin1 |
| 36 | bin2 |
| 37 | bin2 |
| 44 | bin3 |
| 49 | bin3 |
| 60 | bin3 |

ç„¶åŽå®ƒåªéœ€è¦æžšä¸¾æ¡¶ä¹‹é—´çš„è¾¹ç•Œï¼Œæ¯”å¦‚ï¼š

- bin0 vs bin1
- bin1 vs bin2
- bin2 vs bin3

æ¥è®¡ç®—åˆ†è£‚ç‚¹ï¼Œè€Œä¸æ˜¯æžšä¸¾æ‰€æœ‰å…·ä½“å€¼ã€‚

---

## **ðŸƒ é—®é¢˜ 2ï¼šä»€ä¹ˆæ˜¯ Leaf-wiseï¼Ÿæ€Žä¹ˆå’Œ XGBoost çš„ Level-wise ä¸ä¸€æ ·ï¼Ÿ**

---

### **âœ… Level-wiseï¼šæŒ‰â€œå±‚â€æ¥ç”Ÿé•¿æ ‘ï¼ˆXGBoostï¼‰**

å‡è®¾ä½ çŽ°åœ¨è®­ç»ƒåˆ°ç¬¬ä¸€å±‚äº†ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œä½ ä¼šï¼š

```
â†’ æŠŠæ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½æ‰©å±•ä¸€å±‚ï¼ˆ2ä¸ª â†’ 4ä¸ª â†’ 8ä¸ªï¼‰
```

è¿™ç§æ–¹å¼ç»“æž„æ•´é½ï¼Œ**é€‚åˆå¹¶è¡Œè®¡ç®—**ï¼Œä½†ï¼š

> âŒ æœ‰çš„åˆ†è£‚æ²¡å•¥ç”¨ï¼ˆå¢žç›Šä½Žï¼‰ï¼Œä¹Ÿè¦åš
> 

> âŒ æ¯å±‚éƒ½æ‰©ï¼Œå¯èƒ½åšäº†å¾ˆå¤šâ€œæ— æ•ˆâ€çš„å·¥ä½œ
> 

---

### **âœ… Leaf-wiseï¼šLightGBM çš„æ–¹å¼ï¼š**

### **æ¯æ¬¡éƒ½æ‰¾å‡ºå¢žç›Šæœ€å¤§çš„å¶å­æ‰©å±•**

æ¯”å¦‚å½“å‰çš„æ ‘æ˜¯è¿™æ ·ï¼š

```
      Root
     /    \
    L1    L2
         /  \
       L3   L4
```

å®ƒä¼šåŽ»çœ‹æ¯ä¸ªå¶å­çš„åˆ†è£‚æ½œåŠ›ï¼ˆä¿¡æ¯å¢žç›Šå¤§ï¼‰ï¼ˆåˆ†è£‚è°è®©æ··ä¹±å‡å°‘çš„å¤šï¼‰ï¼Œæ¯”å¦‚ï¼š

| **å¶å­** | **åˆ†è£‚ä¿¡æ¯å¢žç›Š** |
| --- | --- |
| L1 | 0.3 |
| L3 | 0.1 |
| L4 | 0.8 â†æœ€å¤§ |

ðŸ‘‰ å®ƒå°±**ä¼˜å…ˆåˆ†è£‚ L4**ï¼Œç”Ÿæˆæ–°çš„æ›´æ·±çš„å¶å­ã€‚

å› ä¸ºåªæœ‰ç»§ç»­åˆ†è£‚â€é”™å¾—å¤šâ€çš„å¶å­ï¼Œæ¨¡åž‹çš„æ•´ä½“è¯¯å·®æ‰èƒ½ä¸‹é™å¾—æœ€å¿«

---

### **âœ… å¥½å¤„ï¼š**

- ç²¾åŠ›é›†ä¸­ï¼šåªæ‰©å±•å¯¹ç²¾åº¦è´¡çŒ®æœ€å¤§çš„åœ°æ–¹
- å­¦å¾—å¿«ï¼šæ”¶æ•›é€Ÿåº¦æ›´å¿«
- æ ‘ä¸è§„åˆ™ã€å¯èƒ½ä¸å¹³è¡¡ï¼Œä½†å‡†ç¡®çŽ‡æ›´é«˜

---

## **ðŸŒªï¸ é—®é¢˜ 3ï¼šGOSS æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå« One-Side Samplingï¼Ÿ**

---

### **âœ… èƒŒæ™¯é—®é¢˜ï¼šæ ·æœ¬å¤ªå¤šï¼Œè®­ç»ƒå¤ªæ…¢ â†’ è¦ä¸è¦é‡‡æ ·ä¸€éƒ¨åˆ†æ ·æœ¬æ¥è®­ç»ƒï¼Ÿ**

> æ™®é€šçš„éšæœºé‡‡æ ·ï¼Œä¼šæŠŠâ€œéš¾æ ·æœ¬â€å’Œâ€œå®¹æ˜“æ ·æœ¬â€éƒ½éšæœºæŠ½ä¸€éƒ¨åˆ†å‡ºæ¥ã€‚
> 

---

### **âœ… GOSS çš„ç­–ç•¥ï¼š**

### **ä¸åŠ¨â€œéš¾æ ·æœ¬â€ï¼Œåªä»Žâ€œå®¹æ˜“æ ·æœ¬â€é‡Œé‡‡æ ·**

- LightGBM ä¼šå…ˆç®—å‡ºæ¯ä¸ªæ ·æœ¬çš„â€œæ®‹å·®ï¼ˆæ¢¯åº¦ï¼‰â€
- æ®‹å·®å¤§ â†’ æ¨¡åž‹é”™å¾—ç¦»è°± â†’ é‡è¦æ ·æœ¬
- æ®‹å·®å° â†’ æ¨¡åž‹åŸºæœ¬å¯¹äº† â†’ æ¬¡è¦æ ·æœ¬

---

### **ðŸŽ¯ GOSS ç­–ç•¥ï¼š**

- å– **top 20% æ®‹å·®æœ€å¤§çš„æ ·æœ¬**ï¼ˆä¿ç•™æ‰€æœ‰â€œå›°éš¾æ ·æœ¬â€ï¼‰
- å†ä»Žå‰©ä¸‹çš„ 80% é‡Œ**éšæœºé‡‡æ ·ä¸€éƒ¨åˆ†â€œå®¹æ˜“æ ·æœ¬â€**ï¼ˆæ¯”å¦‚ 10%ï¼‰

è¿™æ ·å°±èƒ½ï¼š

> âœ… ä¿ç•™è®­ç»ƒé‡ç‚¹æ ·æœ¬ï¼Œæå‡è®­ç»ƒæ•ˆçŽ‡
> 

> âœ… åŒæ—¶ä¿è¯å¯¹å…¨å±€æ ·æœ¬çš„æ³›åŒ–èƒ½åŠ›
> 

> âœ… æ¯”éšæœºé‡‡æ ·æ›´é«˜æ•ˆã€æ›´æœ‰ä»£è¡¨æ€§ï¼
> 

---